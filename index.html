<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MicroNeedlingForm</title>
</head>
<body  style="font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
background-color:whitesmoke;
margin-left: 70px;
font-size: 25px;
line-height: 2;">
    <form id="form">
        <!-- <P style="page-break-before: always"> -->
            <!-- <div style="page-break-before: always"></div> -->
        <H2 style="text-align: center; margin: 20px 0px;"><u>MICRO-NEEDLING CONSENT FORM</u></H2>

        <label for="name">Name:</label>
        <input type="text" id="name" name="name">

        <label for="date">Date:</label>
        <input type="date" name="date" id="date"> <br>

        <label for="address">Address:</label>
        <input type="text" id="address" name="address">

        <label for="number">Phone Number:</label>
        <input type="number" id="number" name="number"> <br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email"> <br>

        <h4>CLARIFICATION AND INFORMED CONSENT</h4>

        <p>ABOUT THE PROCEDURE:</p> <br>

        <p>Micro-needling is performed using a DERMAPEN. The DERMAPEN micro-needling procedure is performed in a safe and precise manner with a single-use, sterile needle head. The treatment session usually takes about 30 - 60 minutes, depending on the area(s) being treated. Throughout the procedure, activating agents will be applied to stimulate the rejuvenation process. Then a hydrating facial mask will be applied for hydration. After the procedure, your skin will be red with mild swelling / redness that might feel like a sunburn, and it might feel tight and sensitive to the touch. Although these symptoms may take 2-3 days to resolve completely, they will diminish significantly within 3-6 hours after treatment.</p>

        <p>Smoking can cause intense contractions of the vessels which can lead to decreased building of Petechiae (pinpoint bleeding). Therefore, it would be good to avoid smoking at least three hours before the treatment.</p>

        <h4><u><b>CONTRIDICTIONS</b></u></h4>

        <p>Select any that apply:</p>

        <label for="conditions"></label>        
        <input type="checkbox" name="conditions" value="rosacea">Rosacea<br>
        <input type="checkbox" name="conditions" value="antiCoagulants">Anti-coagulants<br>
        <input type="checkbox" name="conditions" value="botox">Botox within 14 days<br>
        <input type="checkbox" name="conditions" value="IPLlaser">IPL/laser within 14 days<br>
        <input type="checkbox" name="conditions" value="pregnantNursing">Pregnant / Nursing<br>
        <input type="checkbox" name="conditions" value="tryingForPregnancy">Trying to get pregnant<br>
        <input type="checkbox" name="conditions" value="diabetes">Diabetes<br>
        <input type="checkbox" name="conditions" value="immuneDisorders">Immune Disorders<br>
        <input type="checkbox" name="conditions" value="herpies">Herpies comlex(blisters)
        <input type="text" name="conditions" id="conditions"> <br>

        <p><b>*By checking the box, you agree you have read and accept the following statements below.</b></p>
        
        <input type="checkbox" name="initial">
        <label for="initial">I understand that the fine needles induce the production of the body's own collagen. Therefore, the needles penetrate the epidermis (top layer of the skin) and cause micro injuries. Due to the wound healing process a lot of different healing factors are released in the skin. This leads to the formation of collagen and elastin fibers under the skins surface. This process will take place during 4-6 weeks after the treatment. For an optimal result more than one treatment can be necessary.</label> <br>

        <input type="checkbox" name="initial">
        <label for="initial">I understand that the treatment can have the following side effects: redness and swelling: During the first 3 days after the treatment redness and swelling can occur. This is because the needle penetration does force micro lesions which will disappear during the healing process. The wounds will be closed very quickly, about three hours after the treatment. <b>Keloid:</b> If you have the tendency to form keloid scars, the micro lesions which are caused during the micro-needling can also lead to keloids. <b>hyperpigmentation:</b> it is very rare but possible that hyperpigmentation occurs in the treated skin area, e.g. after excessive sun exposure. A sun protection factor of SPF 30+ can prevent this. <b>Herpes simplex:</b> If you already suffered from herpes simplex, the micro-needling treatment can force it once more. Precautions can prevent this. Furthermore, Hematomata (bruises), inflammation, itching and moderate pain can occur after treatment.</label> <br>

        <div style="page-break-before: always">

        <input type="checkbox" name="initial">
        <label for="initial">I understand if I am prone to shingles in the treated area, (the area being treated needs to be clear of breakouts for a minimum of 6 months) I need to be on my medications to prevent shingles 5 days before my micro-needling service and 5 days after my micro-needling service to prevent activating the shingles virus.</label> <br>

        <input type="checkbox" name="initial">
        <label for="initial">I understand it is important to keep out of the sun after the treatment for 7 days to avoid hyperpigmentation (also no tanning booths). If I stay outdoors during sunny weather it is recommended to use sun protection with at least SPF 30.</label> <br>

        <input type="checkbox" name="initial">
        <label for="initial">I understand I should NOT wear any make-up for 72 hours to avoid irritation.</label> <br>

        <input type="checkbox" name="initial">
        <label for="initial">I understand that indlammation of the skin after the treatment happens very seldom but is possible.</label> <br>

        <h4>PHOTO RELEASE</h4>

        <p><b>*By checking the box, you agree you have read and accept the following photo release.</b></p>

        <input type="checkbox" name="initial">
        <label for="initial">I give my consent that before and after photos of the treated area can be taken and displayed but not limited to my portfolio and used on social media.</label> <br>

        <h4>You have the option to use a numbering agent before treatment:</h4>

        <p><b>*By checking the box, you agree you have read and accept the following statement</b></p>

        <input type="checkbox" name="initial">
        <label for="initial">I decline a 24 hour patch test before Micro-needling procedure.</label> <br>

        <h4>ACKNOWLEDGEMENT</h4>

        <p>My signature below acknowledges that I have read and understand the content of this informed consent document. I have been given ample opportunity to ask questions, all of which have been answered in a satisfactory manner. I understand that results can vary and that no gaurantee, neither expressed nor implied, has been or will be given to me regaurding my results. I'm aware of the risks and benefits associated with the Micro-needling procedure, as well as available alrernative treatments. I understand that micro-needling is an elective procedure performed solely for cosmetic purposes and is not critical to my health. Of my own free will, I am requesting and providing my informed consent to undergo micro-needling treatment. I assume all risks as my own. I hereby release Beautiful You By Stacy from any liability, both seen and unforseen, now and forever.</p>

        <!-- <P style="page-break-before: always"></P> -->

        <h4>Signature:</h4>
        
        <button class="write">Write Electronic Signature</button>

        <div id="sig"></div>
        <p><span><a href="#" class="clear-button hidden">Clear</a></span><span><a href="#" class="done hidden" style="color: #000; margin-left: 250px;">Done</a></span></p>
        <canvas height="150" width="550" class="signature-pad hidden"></canvas>


</form>
<div id="button" style="text-align: center;
cursor: pointer;
border: 2px solid black;
padding: 4px;
margin: auto;
max-width: fit-content;
border-radius: 10px;
font-size: 40px;">Done</div>

<div class="hidden" id="loading"style="z-index: 7; position: fixed; font-size: 50px; background-color: lightgray; top: 50%; left: 30%; border: 3px solid black; padding: 40px; border-radius: 15px;">Processing...</div>
<div class="hidden" id="fileSave"style="z-index: 7; position: fixed; font-size: 50px; background-color: lightgray; top: 50%; left: 30%; border: 3px solid black; padding: 40px; border-radius: 15px">File Saved!</div>
<style>
    .hidden{
        display: none;
    }

    :root {
    --primary-color: #000;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        line-height: 1.4;
        padding: 1rem;
    }
    .signature-pad-form {
        max-width: 300px;
        margin: 0 auto;
    }
    .signature-pad {
        cursor: url(pen.png) 1 26, pointer;
        border: 2px solid var(--primary-color);
        border-radius: 4px;
    }
    .clear-button {
        color: var(--primary-color);
    }
    .submit-button {
        width: 100%;
        background-color: var(--primary-color);
        border: none;
        padding: 0.5rem 1rem;
        color: #fff;
        cursor: pointer;
        margin-top: 2rem;
    }
    .overflow{
        overflow:hidden;
    }
    
</style>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js" integrity="sha512-YcsIPGdhPK4P/uRW6/sruonlYj+Q7UHWeKfTAkBW+g83NKM+jMJFJ4iAPfSnVp7BKD4dKMHmVSvICUbE/V1sSw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 

<script>
    var ok = document.getElementById('button');
    var body = document.querySelector('body')
    var labels = document.getElementsByTagName('LABEL');
    var input = document.getElementsByTagName('INPUT');
    var load = document.getElementById('loading');
    var done = document.getElementById('fileSave');
    var doneButton = document.querySelector('.done')
    var style = document.createElement('style');
    var name = document.getElementById('name');
    const sig = document.getElementById('sig');
    const canvas = document.querySelector('canvas');
    const form = document.querySelector('#form');
    const clearButton = document.querySelector('.clear-button');
    const write = document.querySelector('.write');
    const ctx = canvas.getContext('2d');
    let writingMode = false;

    write.addEventListener('click', (event) => {
        event.preventDefault()
        canvas.classList.remove('hidden')
        clearButton.classList.remove('hidden')
        doneButton.classList.remove('hidden')
        write.classList.add('hidden')
        body.classList.add('overflow')
    })
    const clearPad = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    doneButton.addEventListener('click', (event) => {
        event.preventDefault();
        body.classList.remove('overflow')
        const imageURL = canvas.toDataURL();
        const image = document.createElement('img');
        image.src = imageURL;
        image.height = canvas.height;
        image.width = canvas.width;
        image.style.display = 'block';
        canvas.classList.add('hidden')
        doneButton.classList.add('hidden')
        clearButton.classList.add('hidden')
        write.classList.remove('hidden')
        while (sig.firstChild) {
        sig.removeChild(sig.lastChild);
        }
            sig.appendChild(image);
            clearPad();
        })

    const getCursorPosition = (event) => {
        positionX = event.clientX - event.target.getBoundingClientRect().x;
        positionY = event.clientY - event.target.getBoundingClientRect().y;
        return [positionX, positionY];
    }

    const handlePointerDown = (event) => {
        writingMode = true;
        ctx.beginPath();
        const [positionX, positionY] = getCursorPosition(event);
        ctx.moveTo(positionX, positionY);
    }
    const handlePointerUp = () => {
        writingMode = false;
    }

    const handlePointerMove = (event) => {
        if (!writingMode) return
        const [positionX, positionY] = getCursorPosition(event);
        ctx.lineTo(positionX, positionY);
        ctx.stroke();
    }

    clearButton.addEventListener('click', (event) => {
        event.preventDefault();
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    })

    ctx.lineWidth = 2;
    ctx.lineJoin = ctx.lineCap = 'round';

    canvas.addEventListener('pointerdown', handlePointerDown, {passive: true});
    canvas.addEventListener('pointerup', handlePointerUp, {passive: true});
    canvas.addEventListener('pointermove', handlePointerMove, {passive: true});

    ok.addEventListener('click', async function(event){      
        event.preventDefault()
        console.log(form)
        var name = form.name.value + "MicroNeedling"
        var opt = {
        margin:       1,
        filename:     name,
        image:        { type: 'jpeg=', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
    };
        await load.classList.remove('hidden');
        await html2pdf().set(opt).from(form).save();
        await load.classList.add('hidden');
        await done.classList.remove('hidden')
    })

    done.addEventListener("click", function(){
        location.reload()
    })
 </script> 
 </html> 